(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const g=["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0"],k=["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM"],K={tipe:new Audio("sounds/tipe.mp3"),error:new Audio("sounds/error.mp3"),click:new Audio("sounds/click.mp3"),win:new Audio("sounds/win.mp3")};function v(e){const t=K[e];t.currentTime=0,t.play().catch(n=>console.error("ошибка воспроизведения звука",n))}function E(e){return{easy:L("easy",e,!0),medium:L("medium",e),hard:L("hard",e),start:L("START",e,!1,"start_menu")}}function L(e,t,n=!1,s=""){const a=document.createElement("button");return a.className=`level_button ${s} ${n?"active":""}`.trim(),a.textContent=e,t.append(a),a}function x(e,t){const n=a=>{Object.values(e).forEach(r=>{r.classList.remove("active")}),e[a].classList.add("active");let o;switch(a){case"easy":o=g;break;case"medium":o=k;break;case"hard":o=[...g,...k];break}t.update(a,o),v("tipe")},s=()=>{e.start.classList.add("active1"),t.onStart&&t.onStart(),v("click")};e.easy.addEventListener("click",()=>n("easy")),e.medium.addEventListener("click",()=>n("medium")),e.hard.addEventListener("click",()=>n("hard")),e.start.addEventListener("click",s)}const u={numberOfChars:2,outPut:[],charsArray:[...g],score:0,tryCount:0,maxCount:2,updateNumberChars(e){this.numberOfChars=e},updateOutPut(e){this.outPut=e.map(t=>t.replace("Key","").replace("Digit","").toUpperCase())},updateCharsArray(e){this.charsArray=e},incrementScore(){return this.score+=1,this.score},incrementCount(){return this.tryCount+=1,this.tryCount},resetCount(){return this.tryCount=0,this.tryCount}},A={easy:"easy",medium:"medium",hard:"HARD"};function O(e){const t=/Android|Iphone|Ipad/i.test(navigator.userAgent);t&&(e.setAttribute("readonly","true"),e.inputMode="none");const n=(r,c=1e3)=>{r&&(r.classList.add("active"),setTimeout(()=>{r.classList.remove("active")},c))},s=r=>{if(t)return;const c=document.querySelector(`[data-key="${r.code}"]`);v("tipe"),n(c)},a=(r,c)=>{var b,f;if(r.preventDefault(),v("tipe"),n(c),e.disabled)return;const l=((b=c.textContent)==null?void 0:b.trim())||"",i=e.selectionStart||0,y=e.selectionEnd||0;e.value=e.value.substring(0,i)+l+e.value.substring(y);const m=(f=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:f.set;m==null||m.call(e,e.value);const h=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertText",data:l});e.dispatchEvent(h),e.selectionStart=e.selectionEnd=i+l.length,e.focus()};document.addEventListener("keydown",s),document.querySelectorAll(".key").forEach(r=>{r.addEventListener("mousedown",c=>{a(c,r)}),r.addEventListener("touchstart",c=>{a(c,r)})})}function d(e,t,n,s){const a=document.createElement(e);return t&&(a.className=t),n&&n.append(a),s&&(a.textContent=s),a}function w(e){const t=d("div","keyboard"),n=d("div","numbers"),s=d("div","letters");return t.append(n,s),e.parent.append(t),C(n,e.numberArray,"key-number"),C(s,e.keyBoardArray,"key-letter"),{destroy:()=>t.remove(),updateKeys:(a,o)=>{C(o==="numbers"?n:s,a,`key-${o}`)}}}function C(e,t,n){e.innerHTML=t.map(s=>`
    <div class="key ${n}" data-key="${s}">
      ${s.replace(/Key|Digit/,"")}
    </div>
  `).join("")}function T(e){const t=d("input","input");e.prepend(t),t.disabled=!0;let n=!1;function s(){t.disabled=!1,t.classList.add("active"),t.focus(),n=!0,t.addEventListener("blur",()=>{n&&t.focus()})}function a(){t.disabled=!0,t.classList.remove("active"),t.blur(),n=!0}return{Element:t,enableInput:s,disableInput:a}}function M(e){const t=d("div","buttons",e),n=d("button","start",t,"START"),s=d("button","repeat",t,"repeat");return n.disabled=!0,s.disabled=!0,{elements:{startBtn:n,repeatBtn:s},controls:{disabledStart:()=>{n.disabled=!0,n.classList.add("disable")},enabledStart:()=>{n.disabled=!1,n.classList.remove("disable")},disableRepeat:()=>{s.disabled=!0,s.classList.remove("active")},enableRepeat:()=>{s.disabled=!1,s.classList.add("active")}}}}function R(e){const t=d("div","lose",void 0,"YOU LOSE!");e.prepend(t);const n=d("button","try_again",t,"try again"),s=d("button","menu_btn",t,"back to menu");return{loseElements:{loseBox:t,tryAgain:n,menuBtn2:s}}}function D(e){const t=d("div","up");e.before(t);const n=d("button","back",t,"back to menu"),s=d("h2","level",t,"Level 1"),a=d("h2","score",t,"score: 0"),o=d("div","now_level",void 0,"easy");t.before(o);function r(){let m=u.numberOfChars/2;s.textContent=`Level ${m}`}function c(m){a.textContent=`score: ${m}`}function l(m){o.textContent=m}function i(){n.disabled=!0,n.classList.add("disabled")}function y(){n.disabled=!1,n.classList.remove("disabled")}return{elements:{upBox:t,backToMenu:n,level:s,score:a,nowLevel:o},update:{updateLevel:r,updateScore:c,updatelevelName:l},menuButton:{disableMenu:i,enableMenu:y}}}function I(e){const t=d("div","win",void 0,"YOU WON!");e.prepend(t);const n=d("button","next_btn",t,"next level"),s=d("button","menu_btn",t,"back to menu");return{winElements:{winBox:t,nextBtn:n,menuBtn:s}}}function N(e,t,n,s,a){function o(c){const l=e.value.toUpperCase();for(let i=0;i<l.length;i++){const y=l[i],m=c[i].replace("Key","").replace("Digit","");if(console.log(y,m),m.toUpperCase()!==y.toUpperCase())return v("error"),e.classList.add("wrong"),s.disableInput(),u.incrementCount(),setTimeout(()=>{e.value="",e.classList.remove("wrong")},1e3),u.tryCount===u.maxCount&&(a.classList.add("active"),t.disabledStart(),n.disableMenu(),t.disableRepeat(),console.log("попытки закончились")),!1}return!0}function r(){u.resetCount()}return{check:o,reset:r}}function $(){const e=d("div","mainScreen",document.body),t=d("div","startScreen",document.body),n=d("h1","logo",t,"Simon Says"),s=d("div","menu");n.after(s);const a=E(s),o=w({parent:e,numberArray:g,keyBoardArray:k}),{Element:r,enableInput:c,disableInput:l}=T(e),{elements:i,controls:y}=M(e),{loseElements:m}=R(e),{winElements:h}=I(e),b=D(r),f=N(r,y,b.menuButton,{disableInput:l},m.loseBox);return{mainScreen:e,startScreen:t,logo:n,menuBox:s,levels:a,keyboard:o,input:r,inputControls:c,disableInput:l,elements:i,controls:y,loseElements:m,winElements:h,upperPanel:b,checkSequence:f}}function B(e,t){t.value="";const n=Array.isArray(e)?e:[e];let s=0;const a=()=>{var c;if(s>=n.length)return;const o=n[s],r=document.querySelector(`[data-key="${o}"]`);if(r){const l=((c=r.textContent)==null?void 0:c.trim())||o.replace("Key","").replace("Digit","");v("tipe"),r.classList.add("active"),t.value+=l,setTimeout(()=>{r.classList.remove("active")},500),s++,setTimeout(a,800)}else console.error("Element not found for key:",o)};a()}function P(e,t){u.updateOutPut([]);const n=[];for(let s=0;s<u.numberOfChars;s++){let a=Math.floor(Math.random()*e.length);n.push(e[a])}return console.log("последовательность:",n),B(n,t),n}function S(e,t,n,s,a){v("click"),e.value="",u.numberOfChars=2,t.classList.remove("active"),n.classList.remove("disable"),s.textContent="START",a.enabledStart(),a.disableRepeat()}const U=e=>{let t=null;return{set(n){this.clear(),e.addEventListener("input",n),t=n},clear(){t&&(e.removeEventListener("input",t),t=null)}}};function H({mainScreen:e,startScreen:t,input:n,elements:s,controls:a,inputControls:o,disableInput:r,winElements:c,loseElements:l,upperPanel:i,checkSequence:y}){const m=U(n);s.startBtn.addEventListener("click",()=>{v("click"),u.resetCount(),n.value="",r(),a.disableRepeat(),a.disabledStart(),u.outPut=P(u.charsArray,n);const b=u.outPut.length*1e3+500;m.clear(),setTimeout(()=>{a.enabledStart(),s.startBtn.textContent="try again",o(),a.enableRepeat(),n.focus(),n.value="",m.set(f=>{h({target:f.target})})},b)});function h(b){const f=b.target;y.check(u.outPut)&&f.value.length===u.outPut.length&&(r(),c.winBox.classList.add("active"),v("win"),a.disabledStart(),i.menuButton.disableMenu(),a.disableRepeat(),u.numberOfChars===10&&(c.nextBtn.classList.add("disable"),c.nextBtn.disabled=!0))}s.repeatBtn.addEventListener("click",()=>{v("click"),n.value="",r(),B(u.outPut,n),a.disableRepeat();const b=u.outPut.length*1e3+500;setTimeout(()=>{n.value="",o()},b)}),c.nextBtn.addEventListener("click",()=>{v("click"),c.winBox.classList.remove("active");const b=u.incrementScore();i.update.updateScore(b),u.numberOfChars+=2,n.value="",r(),a.enabledStart(),i.menuButton.enableMenu(),s.startBtn.textContent="START",i.update.updateLevel(),console.log("количество знаков",u.numberOfChars)}),c.menuBtn.addEventListener("click",()=>{S(n,e,t,s.startBtn,a),c.winBox.classList.remove("active"),i.menuButton.enableMenu(),i.update.updateLevel()}),l.tryAgain.addEventListener("click",()=>{v("click"),l.loseBox.classList.remove("active"),a.enabledStart(),i.menuButton.enableMenu(),s.startBtn.textContent="START",n.value=""}),l.menuBtn2.addEventListener("click",()=>{S(n,e,t,s.startBtn,a),l.loseBox.classList.remove("active"),i.menuButton.enableMenu(),i.update.updateLevel()}),i.elements.backToMenu.addEventListener("click",()=>{S(n,e,t,s.startBtn,a),i.menuButton.enableMenu(),i.update.updateLevel()})}const p=$();H(p);x(p.levels,{update:(e,t)=>{u.updateCharsArray(t),p.upperPanel.update.updatelevelName(A[e]),console.log(`Уровень: ${e}, Символы:`,u.charsArray)},onStart:()=>{p.startScreen.classList.add("disable"),p.mainScreen.classList.add("active"),p.controls.enabledStart()}});O(p.input);
